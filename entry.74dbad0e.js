parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"MeFW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Fluid=void 0;var t=function(){function t(){this._iterations=10,this.dt=.1,this.setRenderCallback=function(t){this._render=t}}return t.prototype.setUpdateCallback=function(t){this._update=t},t.prototype.iterations=function(){return this._iterations},t.prototype.setIterations=function(t){0<t&&t<=100&&(this._iterations=t)},t.prototype.setResolution=function(t,i){var e=t*i;if(!(1<e&&e<1e6)||this._width===t||this._height===i)throw new Error("res too high: "+e);this._width=t,this._height=i,this._reset()},t.prototype.step=function(){this._queryUI(this._oDensities,this._oVelocitiesX,this._oVelocitiesY),this._velocityStep(this._velocitiesX,this._velocitiesY,this._oVelocitiesX,this._oVelocitiesY,this.dt),this._densityStep(this._densities,this._oDensities,this._velocitiesX,this._velocitiesY,this.dt),this._render(new i(this._densities,this._velocitiesX,this._velocitiesY,this._width,this._height,this._rowSize))},t.prototype._reset=function(){this._rowSize=this._width+2,this._size=(this._width+2)*(this._height+2),this._densities=new Array(this._size),this._oDensities=new Array(this._size),this._velocitiesX=new Array(this._size),this._oVelocitiesX=new Array(this._size),this._velocitiesY=new Array(this._size),this._oVelocitiesY=new Array(this._size);for(var t=0;t<this._size;t++)this._oDensities[t]=this._oVelocitiesX[t]=this._oVelocitiesY[t]=this._densities[t]=this._velocitiesX[t]=this._velocitiesY[t]=0},t.prototype._queryUI=function(t,e,s){for(var h=0;h<this._size;h++)t[h]=e[h]=s[h]=0;this._update(new i(t,e,s,this._width,this._height,this._rowSize))},t.prototype._velocityStep=function(t,i,e,s,h){this._addFields(t,e,h),this._addFields(i,s,h),t=[e,e=t][0],i=[s,s=i][0],this._diffuse2(t,e,i,s,h),this._project(t,i,e,s),t=[e,e=t][0],i=[s,s=i][0],this._advect(1,t,e,e,s,h),this._advect(2,i,s,e,s,h),this._project(t,i,e,s)},t.prototype._densityStep=function(t,i,e,s,h){this._addFields(t,i,h),this._diffuse(0,i,t,h),this._advect(0,t,i,e,s,h)},t.prototype._addFields=function(t,i,e){for(var s=0;s<this._size;++s)t[s]+=e*i[s]},t.prototype._linearSolve=function(t,i,e,s,h){var o,_,r,n,c,d,p,f;if(0===s&&1===h)for(_=1;_<=this._height;++_)for(c=_*this._rowSize,++c,o=0;o<this._width;++o)i[c]=e[c],++c;else for(f=1/h,r=0;r<this._iterations;++r)for(_=1;_<=this._height;++_)for(n=(_-1)*this._rowSize,c=_*this._rowSize,d=(_+1)*this._rowSize,p=i[c],++c,o=1;o<=this._width;++o)p=i[c]=(e[c]+s*(p+i[++c]+i[++n]+i[++d]))*f},t.prototype._diffuse=function(t,i,e,s){this._linearSolve(t,i,e,0,1)},t.prototype._linearSolve2=function(t,i,e,s,h,o){var _,r,n,c,d,p,f,w,l;if(0===h&&1===o)for(r=1;r<=this._height;++r)for(d=r*this._rowSize,++d,_=0;_<this._width;++_)t[d]=i[d],e[d]=s[d],++d;else for(l=1/o,n=0;n<this._iterations;++n)for(r=1;r<=this._height;++r)for(c=(r-1)*this._rowSize,d=r*this._rowSize,p=(r+1)*this._rowSize,f=t[d],w=e[d],++d,_=1;_<=this._width;++_)f=t[d]=(i[d]+h*(f+t[d]+t[c]+t[p]))*l,w=e[d]=(s[d]+h*(w+e[++d]+e[++c]+e[++p]))*l},t.prototype._diffuse2=function(t,i,e,s,h){this._linearSolve2(t,i,e,s,0,1)},t.prototype._advect=function(t,i,e,s,h,o){var _,r,n,c,d,p,f,w,l,u,y,a,v,z,S,g=o*this._width,X=o*this._height,Y=this._width+.5,V=this._height+.5;for(r=1;r<=this._height;++r)for(n=r*this._rowSize,_=1;_<=this._width;++_)(c=_-g*s[++n])<.5?c=.5:c>Y&&(c=Y),f=(p=0|c)+1,(d=r-X*h[n])<.5?d=.5:d>V&&(d=V),l=(w=0|d)+1,u=1-(y=c-p),a=1-(v=d-w),z=w*this._rowSize,S=l*this._rowSize,i[n]=u*(a*e[p+z]+v*e[p+S])+y*(a*e[f+z]+v*e[f+S])},t.prototype._project=function(t,i,e,s){var h,o,_,r,n,c,d,p,f,w,l=-.5/Math.sqrt(this._width*this._height);for(o=1;o<=this._height;++o)for(_=(o-1)*this._rowSize,r=o*this._rowSize,n=(o+1)*this._rowSize,c=r-1,d=r+1,h=1;h<=this._width;++h)s[++r]=l*(t[++d]-t[++c]+i[++n]-i[++_]),e[r]=0;this._linearSolve(0,e,s,1,4);var u=.5*this._width,y=.5*this._height;for(o=1;o<=this._height;++o)for(p=o*this._rowSize-1,f=o*this._rowSize,w=o*this._rowSize+1,_=(o-1)*this._rowSize,r=o*this._rowSize,n=(o+1)*this._rowSize,h=1;h<=this._width;++h)t[++f]-=u*(e[++w]-e[++p]),i[f]-=y*(e[++n]-e[++_])},t}();exports.Fluid=t;var i=function(){function t(t,i,e,s,h,o){this._densities=t,this._velocitiesX=i,this._velocitiesY=e,this._width=s,this._height=h,this._rowSize=o}return t.prototype.key=function(t,i){return t+1+(i+1)*this._rowSize},t.prototype.setDensity=function(t,i,e){this._densities[this.key(t,i)]=e},t.prototype.getDensity=function(t,i){return this._densities[this.key(t,i)]},t.prototype.setVelocity=function(t,i,e,s){this._velocitiesX[this.key(t,i)]=e,this._velocitiesY[this.key(t,i)]=s},t.prototype.getXVelocity=function(t,i){return this._velocitiesX[this.key(t,i)]},t.prototype.getYVelocity=function(t,i){return this._velocitiesY[this.key(t,i)]},t.prototype.width=function(){return this._width},t.prototype.height=function(){return this._height},t}();
},{}],"kXwH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.off=exports.on=void 0,exports.on=function(e,t,o,r){return e.addEventListener(t,o,r)},exports.off=function(e,t,o,r){return e.removeEventListener(t,o,r)};
},{}],"QAnz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./dynamics"),t=require("./events"),n=Math.hypot,o=Math.max,i=window.innerWidth,a=window.innerHeight,r=window.requestAnimationFrame,l=document.querySelector("pre"),d=document.querySelector("canvas"),s=d.getContext("2d");d.width=i,d.height=a;var y=d.cloneNode(),c=y.getContext("2d"),u=c.createImageData(i,a),x=u.data,m={x:0,y:0,dx:0,dy:0,ox:0,oy:0,len:0};t.on(window,"mousemove",function(e){if(e.buttons){var t=e.clientX,i=e.clientY,a=e.movementX,r=e.movementY,l=[t-a,i-r,o(1,n(a,r)+.5|0)];m={x:t,y:i,dx:a,dy:r,ox:l[0],oy:l[1],len:l[2]}}else m={x:0,y:0,dx:0,dy:0,ox:0,oy:0,len:0}});var v=new e.Fluid;v.setUpdateCallback(function(e){for(var t=0;t<m.len;++t){var n=m.ox+m.dx*(t/m.len)|0,o=m.oy+m.dy*(t/m.len)|0;e.setVelocity(n,o,m.dx,m.dy),e.setDensity(n,o,25)}}),v.setRenderCallback(function(e){x.fill(0);for(var t=0;t<i;++t)for(var n=0;n<a;++n)x[4*(n*i+t)+3]=255*e.getDensity(t,n);c.putImageData(u,0,0),s.drawImage(y,0,0)}),v.setResolution(i,a);var f=function e(t){r(e),s.fillStyle="hsl("+t/100%360+", 50%, 90%)",s.fillRect(0,0,i,a),v.step(),l.innerText=JSON.stringify({},null,2)};r(f);
},{"./dynamics":"MeFW","./events":"kXwH"}]},{},["QAnz"], null)
//# sourceMappingURL=/intergalacticfantastic/entry.74dbad0e.js.map